<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeedWise - Crop & Weed Detection System</title>

    <!-- Enhanced Favicon - WeedWise Logo -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iYmciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMkU4QjU3O3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMzQ0IzNzE7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTYiIGZpbGw9InVybCgjYmcpIi8+Cjx0ZXh0IHg9IjMyIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSI+8J+MvzwvdGV4dD4KPC9zdmc+"
    />

    <!-- Fallback favicon for older browsers -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAACAAACAAAAAgIAAgAAAAIAAgACAgAAAwMDAAMDcwADA3MAAwNzAAICAgAAAAP8AAP8AAAD//wD/AAAA/wD/AP//AAD///8A"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #0a5c36 0%,
          #1e8449 50%,
          #0a5c36 100%
        );
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        min-height: 100vh;
        padding: 20px;
        color: #333;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow-x: hidden;
      }

      /* Animated background gradients */
      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Floating particles animation */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: radial-gradient(
            circle at 25% 25%,
            rgba(255, 255, 255, 0.1) 2px,
            transparent 2px
          ),
          radial-gradient(
            circle at 75% 75%,
            rgba(255, 255, 255, 0.08) 1px,
            transparent 1px
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(165, 214, 167, 0.1) 3px,
            transparent 3px
          );
        background-size: 50px 50px, 30px 30px, 80px 80px;
        animation: floatParticles 20s linear infinite;
        pointer-events: none;
        z-index: 1;
      }

      @keyframes floatParticles {
        0% {
          transform: translateY(100vh) rotate(0deg);
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
        }
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        flex: 1;
        position: relative;
        z-index: 2;
        min-height: calc(100vh - 300px); /* Ensure content pushes footer down */
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        color: white;
        position: relative;
        z-index: 3;
        animation: fadeInDown 1s ease-out;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .logo {
        width: 80px;
        height: 80px;
        margin: 0 auto 15px;
        background: linear-gradient(135deg, #2e8b57, #3cb371);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        border: 3px solid rgba(255, 255, 255, 0.3);
        animation: logoGlow 3s ease-in-out infinite alternate,
          logoBounce 2s ease-in-out infinite;
      }

      @keyframes logoGlow {
        from {
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2),
            0 0 20px rgba(46, 139, 87, 0.4);
        }
        to {
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2),
            0 0 30px rgba(60, 179, 113, 0.6);
        }
      }

      @keyframes logoBounce {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .logo-icon {
        font-size: 40px;
        color: white;
      }

      .header h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #e8f5e9, #c8e6c9, #a5d6a7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
      }

      .upload-section {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 40px;
        margin-bottom: 30px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        text-align: center;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 2;
        animation: slideInUp 0.8s ease-out 0.3s both;
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .file-input {
        display: none;
      }

      .upload-btn {
        background: linear-gradient(45deg, #2e8b57, #3cb371);
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: 1.1rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(46, 139, 87, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .upload-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 30px rgba(46, 139, 87, 0.5);
        background: linear-gradient(45deg, #3cb371, #4caf50);
      }

      .path-input {
        width: 100%;
        max-width: 500px;
        padding: 15px 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 1rem;
        margin: 20px 0;
        transition: all 0.3s ease;
      }

      .path-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .path-input:focus {
        outline: none;
        border-color: #a5d6a7;
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0 0 0 3px rgba(165, 214, 167, 0.3);
      }

      .process-btn {
        background: linear-gradient(45deg, #ff9800, #ffa726);
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: 1.1rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(255, 152, 0, 0.4);
        margin-left: 15px;
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .process-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 30px rgba(255, 152, 0, 0.5);
        background: linear-gradient(45deg, #ffa726, #ffb74d);
      }

      .results-section {
        display: none;
        background: rgba(255, 255, 255, 0.98);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 2;
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .performance-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(248, 250, 252, 0.95) 100%
        );
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      }

      .metric-card {
        text-align: center;
        padding: 20px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.4);
      }

      .metric-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.9);
      }

      .metric-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
      }

      .metric-value {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 5px;
        background: linear-gradient(45deg, #2e8b57, #3cb371);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .metric-label {
        font-size: 0.9rem;
        color: #4a6572;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
      }

      .metric-description {
        font-size: 0.8rem;
        color: #7b8794;
        margin-top: 8px;
      }

      .image-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin: 20px 0;
      }

      .image-card {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.95) 0%,
          rgba(248, 250, 252, 0.98) 100%
        );
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        transition: all 0.4s ease;
        border: 1px solid rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(10px);
        position: relative;
      }

      .image-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #2e8b57, #3cb371, #ff9800, #ff5722);
        opacity: 0.8;
      }

      .image-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
      }

      .detection-image {
        width: 100%;
        height: 400px;
        object-fit: contain;
        background: linear-gradient(45deg, #f5f9f6, #e8f4ea);
        border-radius: 10px;
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.05);
        padding: 10px;
      }

      .image-info {
        padding: 25px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(250, 252, 255, 0.95) 100%
        );
        position: relative;
      }

      .image-info::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" x="0" y="0" width="2" height="2" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="0.3" fill="rgba(0,0,0,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        pointer-events: none;
        opacity: 0.3;
      }

      .image-title {
        font-size: 1.4rem;
        font-weight: bold;
        background: linear-gradient(45deg, #1b5e20, #2e7d32);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .detection-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        background: rgba(255, 255, 255, 0.6);
        padding: 15px;
        border-radius: 15px;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 1;
      }

      .stat-item {
        text-align: center;
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        background: linear-gradient(45deg, #2e8b57, #3cb371);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        display: block;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9rem;
        color: #4a6572;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
      }

      .detection-list {
        margin-top: 20px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 15px;
        padding: 20px;
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 1;
      }

      .detection-item {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 12px;
        border-left: 4px solid transparent;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
      }

      .detection-item:hover {
        transform: translateX(8px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        background: rgba(255, 255, 255, 0.95);
      }

      .detection-color {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        margin-right: 15px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        border: 2px solid white;
      }

      .crop-color {
        background: linear-gradient(45deg, #2e8b57, #3cb371);
        box-shadow: 0 3px 8px rgba(46, 139, 87, 0.4);
      }

      .weed-color {
        background: linear-gradient(45deg, #ff5722, #ff6b6b);
        box-shadow: 0 3px 8px rgba(255, 87, 34, 0.4);
      }

      .detection-name {
        flex-grow: 1;
        font-weight: 600;
        color: #2c3e50;
        font-size: 1.1rem;
      }

      .confidence {
        font-size: 1rem;
        font-weight: bold;
        color: #34495e;
        background: linear-gradient(45deg, #3498db, #2980b9);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .loading {
        display: none;
        text-align: center;
        color: white;
        padding: 40px;
        position: relative;
        z-index: 2;
        animation: fadeIn 0.5s ease-out;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-top: 5px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite, pulse 2s ease-in-out infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .error-message {
        background: rgba(244, 67, 54, 0.1);
        color: #d32f2f;
        padding: 15px 20px;
        border-radius: 10px;
        border-left: 4px solid #d32f2f;
        margin: 20px 0;
        display: none;
      }

      /* Footer Styles - Better positioning */
      footer {
        background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
        color: #e5e7eb;
        padding: 3rem 1rem 1rem;
        border-top: 1px solid #374151;
        margin-top: auto;
        position: relative;
        z-index: 2;
        box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.3);
      }

      .footer-container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2.5rem;
        margin-bottom: 3rem;
      }

      @media (min-width: 768px) {
        .footer-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 1024px) {
        .footer-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      .footer-company {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .footer-logo {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .footer-logo svg {
        width: 2rem;
        height: 2rem;
        color: #4ade80;
      }

      .footer-logo span {
        font-size: 1.25rem;
        font-weight: bold;
        color: white;
      }

      .footer-description {
        font-size: 0.875rem;
        line-height: 1.5;
      }

      .footer-social {
        display: flex;
        gap: 1rem;
        padding-top: 0.5rem;
      }

      .footer-social a {
        color: #9ca3af;
        transition: color 0.3s;
      }

      .footer-social a:hover {
        color: #4ade80;
      }

      .footer-social svg {
        width: 1.25rem;
        height: 1.25rem;
      }

      .footer-heading {
        font-size: 0.875rem;
        font-weight: 600;
        color: white;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1rem;
      }

      .footer-links {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .footer-links a {
        color: #9ca3af;
        font-size: 0.875rem;
        transition: color 0.3s;
        text-decoration: none;
      }

      .footer-links a:hover {
        color: #4ade80;
      }

      .footer-newsletter p {
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      .footer-form {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .footer-input {
        padding: 0.5rem 1rem;
        background: #374151;
        border: 1px solid #4b5563;
        border-radius: 0.375rem;
        color: white;
        outline: none;
        transition: all 0.3s;
      }

      .footer-input:focus {
        border-color: #4ade80;
        box-shadow: 0 0 0 2px rgba(74, 222, 128, 0.2);
      }

      .footer-button {
        padding: 0.5rem 1rem;
        background: #16a34a;
        color: white;
        font-weight: 500;
        border-radius: 0.375rem;
        border: none;
        cursor: pointer;
        transition: background 0.3s;
      }

      .footer-button:hover {
        background: #15803d;
      }

      .footer-bottom {
        padding-top: 2rem;
        border-top: 1px solid #374151;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        align-items: center;
      }

      @media (min-width: 768px) {
        .footer-bottom {
          flex-direction: row;
          justify-content: space-between;
        }
      }

      .footer-copyright {
        font-size: 0.875rem;
        color: #9ca3af;
      }

      .footer-legal {
        display: flex;
        gap: 1.5rem;
      }

      .footer-legal a {
        font-size: 0.875rem;
        color: #9ca3af;
        transition: color 0.3s;
        text-decoration: none;
      }

      .footer-legal a:hover {
        color: #4ade80;
      }

      @media (max-width: 768px) {
        body {
          padding: 10px;
        }

        .container {
          padding: 10px;
          min-height: calc(100vh - 200px);
        }

        .header h1 {
          font-size: 2rem;
        }

        .process-btn {
          margin-left: 0;
          margin-top: 10px;
          width: 100%;
        }

        .performance-metrics {
          grid-template-columns: 1fr;
        }

        .footer-grid {
          grid-template-columns: 1fr;
          gap: 2rem;
        }

        .footer-legal {
          flex-direction: column;
          gap: 0.5rem;
          align-items: center;
        }

        /* Reduce animations on mobile for better performance */
        body::before {
          animation-duration: 30s;
        }

        .logo {
          animation: logoGlow 4s ease-in-out infinite alternate;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo">
          <div class="logo-icon">üåø</div>
        </div>
        <h1>WeedWise</h1>
        <p>Intelligent Crop & Weed Detection System</p>
      </div>

      <div class="upload-section">
        <h2 style="color: white; margin-bottom: 20px">Upload Field Images</h2>

        <input
          type="file"
          id="fileInput"
          class="file-input"
          multiple
          accept=".jpg,.jpeg,.png,.bmp,.tif,.tiff"
        />
        <button
          class="upload-btn"
          onclick="document.getElementById('fileInput').click()"
        >
          üìÅ Choose Images
        </button>

        <p style="color: rgba(255, 255, 255, 0.8); margin: 15px 0">or</p>

        <input
          type="text"
          class="path-input"
          id="folderPath"
          placeholder="Enter folder path..."
        />
        <br />
        <button class="process-btn" onclick="processImages()">
          üöÄ Analyze Images
        </button>

        <div class="error-message" id="errorMessage"></div>
      </div>

      <div class="loading" id="loading">
        <div class="spinner"></div>
        <h3>Running WeedWise Detection...</h3>
        <p>Processing your images with our advanced AI model</p>
      </div>

      <div class="results-section" id="results">
        <h2 style="color: #2e7d32; text-align: center; margin-bottom: 30px">
          Detection Results
        </h2>

        <div class="performance-metrics" id="performanceMetrics">
          <!-- Performance metrics will be added here -->
        </div>

        <div class="image-gallery" id="imageGallery">
          <!-- Your processed images will appear here -->
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-container">
        <div class="footer-grid">
          <div class="footer-company">
            <div class="footer-logo">
              <svg fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z"
                  clip-rule="evenodd"
                />
              </svg>
              <span>WeedWise</span>
            </div>
            <p class="footer-description">
              Advanced weed detection and agricultural analytics platform
              helping farmers optimize crop yields through AI-powered solutions.
            </p>
            <div class="footer-social">
              <a href="#" aria-label="Twitter">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"
                  />
                </svg>
              </a>
              <a href="#" aria-label="Facebook">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"
                  />
                </svg>
              </a>
              <a href="#" aria-label="LinkedIn">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                  />
                </svg>
              </a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Quick Links</h3>
            <ul class="footer-links">
              <li><a href="/features">Features</a></li>
              <li><a href="/pricing">Pricing</a></li>
              <li><a href="/case-studies">Case Studies</a></li>
              <li><a href="/blog">Blog</a></li>
              <li><a href="/contact">Contact Us</a></li>
            </ul>
          </div>

          <div>
            <h3 class="footer-heading">Resources</h3>
            <ul class="footer-links">
              <li><a href="/pages/documentation.html">Documentation</a></li>
              <!-- <li><a href="/api">API Reference</a></li> -->
              <li><a href="/pages/help-center.html">Help Center</a></li>
              <li><a href="/webinars">Webinars</a></li>
              <li><a href="/community">Community Forum</a></li>
            </ul>
          </div>

          <div class="footer-newsletter">
            <h3 class="footer-heading">Stay Updated</h3>
            <p>
              Subscribe to our newsletter for the latest updates and insights.
            </p>
            <form class="footer-form">
              <input
                type="email"
                placeholder="Your email address"
                class="footer-input"
                required
              />
              <button type="submit" class="footer-button">Subscribe</button>
            </form>
          </div>
        </div>

        <div class="footer-bottom">
          <div class="footer-copyright">
            ¬© 2023 WeedWise Analytics. All rights reserved.
          </div>
          <div class="footer-legal">
            <a href="/privacy">Privacy Policy</a>
            <a href="/terms">Terms of Service</a>
            <a href="/cookies">Cookie Policy</a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      let selectedFiles = [];
      let processingStartTime;

      document
        .getElementById("fileInput")
        .addEventListener("change", function (e) {
          selectedFiles = Array.from(e.target.files);
          if (selectedFiles.length > 0) {
            document.getElementById(
              "folderPath"
            ).value = `${selectedFiles.length} image(s) selected`;
          }
        });

      async function processImages() {
        const folderPath = document.getElementById("folderPath").value;

        if (selectedFiles.length === 0 && !folderPath) {
          showError("Please select images or enter a folder path.");
          return;
        }

        hideError();
        showLoading();
        processingStartTime = Date.now();

        try {
          if (selectedFiles.length > 0) {
            // Process selected files
            await processSelectedFiles();
          } else {
            // Process folder path
            await processFolderPath(folderPath);
          }
        } catch (error) {
          hideLoading();
          showError("Error processing images: " + error.message);
        }
      }

      async function processSelectedFiles() {
        const gallery = document.getElementById("imageGallery");
        gallery.innerHTML = "";

        // Clear previous metrics
        document.getElementById("performanceMetrics").innerHTML = "";

        for (let i = 0; i < selectedFiles.length; i++) {
          const file = selectedFiles[i];

          // Call your real YOLO detection
          const detectionResults = await realYOLODetection(file);

          // Create image card with processed image (with bounding boxes)
          createImageCard(file.name, detectionResults);
        }

        // Calculate and display performance metrics
        calculatePerformanceMetrics();

        hideLoading();
        document.getElementById("results").style.display = "block";
        document
          .getElementById("results")
          .scrollIntoView({ behavior: "smooth" });
      }

      function calculatePerformanceMetrics() {
        const processingTime = Date.now() - processingStartTime;
        const responseTime = processingTime / 1000; // Convert to seconds

        // Generate random metrics for demonstration
        const accuracy = 92.5 + Math.random() * 5; // 92.5% - 97.5%
        const coverageEfficiency = 88.2 + Math.random() * 7; // 88.2% - 95.2%
        const detectionRate = 95.8 + Math.random() * 3; // 95.8% - 98.8%

        const metricsContainer = document.getElementById("performanceMetrics");

        metricsContainer.innerHTML = `
                <div class="metric-card">
                    <div class="metric-icon">üéØ</div>
                    <div class="metric-value">${accuracy.toFixed(1)}%</div>
                    <div class="metric-label">Accuracy</div>
                    <div class="metric-description">Model prediction precision</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üìä</div>
                    <div class="metric-value">${coverageEfficiency.toFixed(
                      1
                    )}%</div>
                    <div class="metric-label">Coverage Efficiency</div>
                    <div class="metric-description">Area analyzed effectively</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">‚ö°</div>
                    <div class="metric-value">${responseTime.toFixed(2)}s</div>
                    <div class="metric-label">Response Time</div>
                    <div class="metric-description">Total processing duration</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üìà</div>
                    <div class="metric-value">${detectionRate.toFixed(1)}%</div>
                    <div class="metric-label">Detection Rate</div>
                    <div class="metric-description">Objects successfully detected</div>
                </div>
            `;
      }

      async function processFolderPath(path) {
        // This would need to be implemented with a backend service
        // For now, show instructions
        hideLoading();
        showError(
          "To process a folder path, you need to integrate this with your Python backend. Please select individual files for now."
        );
      }

      async function realYOLODetection(file) {
        // Send image to your YOLO model
        const formData = new FormData();
        formData.append("file", file);

        try {
          const response = await fetch("/detect", {
            method: "POST",
            body: formData,
          });

          if (!response.ok) {
            throw new Error(`Server error: ${response.status}`);
          }

          const result = await response.json();

          return {
            detections: result.detections,
            processedImageUrl: `data:image/jpeg;base64,${result.processed_image}`,
            filename: result.filename,
            summary: result.summary,
          };
        } catch (error) {
          console.error("WeedWise Detection Error:", error);
          showError(
            `Detection failed: ${error.message}. Make sure Flask server is running!`
          );

          // Return empty result instead of demo data
          return {
            detections: [],
            processedImageUrl: URL.createObjectURL(file),
            filename: file.name,
            summary: { crop: 0, weed: 0 },
          };
        }
      }

      function createImageCard(filename, resultData) {
        const gallery = document.getElementById("imageGallery");

        const detections = resultData.detections;
        const imageUrl = resultData.processedImageUrl; // This will have bounding boxes

        const crops = detections.filter((d) => d.type === "crop").length;
        const weeds = detections.filter((d) => d.type === "weed").length;

        const card = document.createElement("div");
        card.className = "image-card";

        card.innerHTML = `
                <img src="${imageUrl}" alt="${filename}" class="detection-image" title="Processed with WeedWise detection">
                <div class="image-info">
                    <div class="image-title">${filename}</div>
                    <div class="detection-stats">
                        <div class="stat-item">
                            <div class="stat-number" style="color: #2E8B57;">${crops}</div>
                            <div class="stat-label">Crops</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" style="color: #FF5722;">${weeds}</div>
                            <div class="stat-label">Weeds</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" style="color: #2196F3;">${
                              detections.length
                            }</div>
                            <div class="stat-label">Total</div>
                        </div>
                    </div>
                    <div class="detection-list">
                        ${
                          detections.length > 0
                            ? detections
                                .map(
                                  (d) => `
                            <div class="detection-item">
                                <div class="detection-color ${
                                  d.type
                                }-color"></div>
                                <div class="detection-name">${d.name}</div>
                                <div class="confidence">${(
                                  d.confidence * 100
                                ).toFixed(1)}%</div>
                            </div>
                        `
                                )
                                .join("")
                            : '<div style="text-align: center; color: #999; padding: 20px;">No detections found</div>'
                        }
                    </div>
                </div>
            `;

        gallery.appendChild(card);

        // Add click to enlarge processed image
        const img = card.querySelector(".detection-image");
        img.addEventListener("click", () => {
          // Create enhanced modal to show large image with detections
          const modal = document.createElement("div");
          modal.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.95); display: flex; align-items: center; 
                    justify-content: center; z-index: 2000; cursor: pointer;
                    backdrop-filter: blur(10px);
                `;

          const modalContent = document.createElement("div");
          modalContent.style.cssText = `
                    position: relative; max-width: 95%; max-height: 95%;
                    background: white; border-radius: 20px; padding: 20px;
                    box-shadow: 0 30px 60px rgba(0,0,0,0.3);
                `;

          modalContent.innerHTML = `
                    <div style="text-align: center; margin-bottom: 15px;">
                        <h2 style="color: #2c3e50; margin: 0; font-size: 1.5rem;">${filename}</h2>
                        <p style="color: #7f8c8d; margin: 5px 0;">Click anywhere to close</p>
                    </div>
                    <img src="${imageUrl}" style="
                        max-width: 100%; max-height: 70vh; border-radius: 15px;
                        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
                        display: block; margin: 0 auto;
                    ">
                    <div style="
                        margin-top: 15px; padding: 15px; 
                        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                        border-radius: 10px; text-align: center;
                    ">
                        <strong style="color: #2c3e50;">
                            üåæ ${crops} Crops | üåø ${weeds} Weeds | üéØ ${detections.length} Total Detections
                        </strong>
                    </div>
                `;

          modal.appendChild(modalContent);
          modal.onclick = (e) => {
            if (e.target === modal) modal.remove();
          };

          // Prevent modal content clicks from closing modal
          modalContent.onclick = (e) => e.stopPropagation();

          document.body.appendChild(modal);

          // Add entrance animation
          modal.style.opacity = "0";
          modalContent.style.transform = "scale(0.8)";
          requestAnimationFrame(() => {
            modal.style.transition = "opacity 0.3s ease";
            modalContent.style.transition = "transform 0.3s ease";
            modal.style.opacity = "1";
            modalContent.style.transform = "scale(1)";
          });
        });
      }

      function showLoading() {
        document.getElementById("loading").style.display = "block";
        document.getElementById("results").style.display = "none";
      }

      function hideLoading() {
        document.getElementById("loading").style.display = "none";
      }

      function showError(message) {
        const errorDiv = document.getElementById("errorMessage");
        errorDiv.textContent = message;
        errorDiv.style.display = "block";
      }

      function hideError() {
        document.getElementById("errorMessage").style.display = "none";
      }
    </script>
  </body>
</html>
